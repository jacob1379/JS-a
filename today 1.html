<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <title>Document</title>
    <style>
        #box {
            border : 1px solid black;
            width: 500px;
            background-color: navajowhite;
        }
        h1 {
            text-align: center;
        }
        #input {
            width : 400px;
        }
        .title {
            display : inline-block;
            width: 400px;
        }
        .done {
            text-decoration: line-through;
        }
    </style>
        
    <script>
        const addTodos = (todos) => {
            todos.push({
                title : $('#input').val(),
                done : false
            })
            todosPrint(todos);
        }
        const todosPrint = (todos) => {
            const $ul = $('#ul')
            $ul.empty();
            todos.forEach((todo, index)=> {
                const $li = $('<li>').attr('data-no',index).appendTo($ul);
                    if(todo.done===true) {
                        $('<span class="title">').text(todo.title + '(완료)').addClass('done').attr('data-no',index).appendTo($li);
                        } else {
                        $('<span class="title">').text(todo.title).attr('data-no',index).appendTo($li);
                    }
                    $('<span class="close">').text('X').attr('data-no',index).appendTo($li);
            })
        }

        $(document).ready(function() {
            const todos = [{title : '수영하기', done : false}, {title : '그림그리기', done : true}, {title : '숙제하기', done : false} ];
            
            todosPrint(todos);
            

            $('#button').click(function() {
                addTodos(todos)
            })
            $('#input').keyup(function(e) {
                if(e.keyCode===13) addTodos(todos)
            })

            $('#ul').on('click', '.title', function() {
                todos[$(this).attr('data-no')].done =!todos[$(this).attr('data-no')].done;
                todosPrint(todos);
            })
            $('#ul').on('click', '.close', function() {
                todos.splice($(this).attr('data-no'),1)
                todosPrint(todos);
            })
        })
    </script>
</head>
<body>
    <div id="box">
        <h1>To do list</h1>
        <input type="text" id="input" placeholder="여기 입력">
        <button id="button">추가하기</button>
        <ul id="ul">

        </ul>
    </div>
</body>
</html>